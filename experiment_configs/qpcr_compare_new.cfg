binBase: "/fs/szattic-asmg7/rob/countseq/build/src"
dataBase: "/fs/szattic-asmg7/rob/RNASeqProject/data"
resultBase: "/fs/szattic-asmg7/rob/countseq/results"
hg18Base: $dataBase + "/hg18/human_refseq_NMonly_125bpPolyATail_extractedFromHumanGenome_hg18"

BuildIndex : {
		executable : $binBase + "/Sailfish"
		transcriptDB : $hg18Base + "/NM_REFSEQ_20MERS_JF/counts_0"
		ifile : $resultBase + "/transcripts"
		index : $resultBase + "/transcripts" + ".sfi"
		counts : $resultBase + "/transcripts" + ".sfc"
		arguments : {
		    "" : "index"
			"--thash" : $BuildIndex.transcriptDB
			"--index" : $BuildIndex.ifile
		}
		depends : [ $BuildIndex.transcriptDB ]
		produces : [  $BuildIndex.index, $BuildIndex.counts ]
}

CountKmers : {
	    executable : $binBase + "/Sailfish"
		reads : $dataBase + "/SRX016366/*.fastq"
		readcounts : $resultBase + "/SRX016366.sfc"
		arguments : {
		    "" : "count"
		    "--index" : $BuildIndex.index
		    "--counts" : $CountKmers.readcounts
			"--reads" : $CountKmers.reads
			}
		depends : [ $BuildIndex.index, $BuildIndex.counts, $CountKmers.reads ]
		produces : [ $CountKmers.readcounts ]
}

Sailfish : {
	executable : $binBase + "/Sailfish"
	output : $resultBase + "/hbr_new.sf"
	arguments : {
		"" : "itopt",
		"--iterations" : "10",
		"--index" : $BuildIndex.ifile,
		"--tgmap" : $hg18Base + "/f_NM_ONLY_hg18.refseq.gtf",
		"--counts" : $CountKmers.readcounts,
		"--genes" : $hg18Base + "/NM_refseq_ref.transcripts.fa",
		"-o" : $Sailfish.output
		}
	depends : [ $hg18Base + "/NM_refseq_ref.transcripts.fa",
		        $BuildIndex.index,
		        $BuildIndex.counts,
		        $CountKmers.readcounts,
		        $hg18Base + "/f_NM_ONLY_hg18.refseq.gtf"],
    produces : [ $Sailfish.output ]
}

QPCRExtraction : {
	executable : "python /fs/szattic-asmg7/rob/countseq/scripts/ParseSoftFile.py"
	output : $resultBase + "qrtpcr_hbr.expression"
	arguments : {
	    "--soft" : $dataBase + "/qRTPCR_GPL4097/GPL4097_family.soft"
		"--gfile" : $hg18Base + "/f_NM_ONLY_hg18.refseq.gtf"
		"--samps" : "GSM129642,GSM129643,GSM129644,GSM129645"
		"--out" : $QPCRExtraction.output
	}
	depends : [ $dataBase + "/qRTPCR_GPL4097/GPL4097_family.soft"
		        $hg18Base + "/f_NM_ONLY_hg18.refseq.gtf" ]
    produces : [ $QPCRExtraction.output ]
}
